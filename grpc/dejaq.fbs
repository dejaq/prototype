namespace DejaQ;

table ProduceRequest {
    // 16bit
    priority:ushort;
    body:[ubyte];
}

table ProduceResponse {
    ack:bool;
}

table Ack {
    // 64bit
    id:[ulong];
    ack:bool;
}

table Message {
    id: ulong;
    priority:ushort;
    body:[ubyte];
}

// https://grpc.io/docs/guides/concepts/
rpc_service Broker {
    Produce(ProduceRequest):ProduceResponse (streaming: "client");
    Consume(Ack):Message (streaming: "bidi");
}